import{d as p,j as v,g as c,i as g,c as _,M as m,b as s,a as S,r as x,k as W,t as d,f as C,h as i}from"./entry-client-3f06b232.js";import{s as n}from"./styles.module-fb889907.js";const T=d("<h1>Missing parameters"),N=d("<h1><!#><!/> would like to receive data from Web Scrobbler at URL <!#><!/>."),k=d("<div><button>Accept</button><button>Reject"),E=d("<p>Note: Web Scrobbler does no verification of applications."),R=d("<h1>Waiting for communications with extension..."),y=d('<p>This shouldn&apos;t take more than a couple of seconds. Did you <a href="./">install Web Scrobbler?'),A=d("<h1>Rejected data access for <!#><!/>"),j=d("<h1>You have given data access to <!#><!/>!"),M=d("<p>Note that you may have to restart your browser for the changes to take effect."),B=d('<header id="header">');var $=function(r){return r.Waiting="WAITING",r.Rejected="REJECTED",r.Accepted="ACCEPTED",r.Confirmed="CONFIRMED",r}($||{});function I(){const[r,f]=p();return v(()=>{f(new URLSearchParams(window.location.search));const[h,e]=p($.Waiting);window.wsState=h,window.setWSState=e}),(()=>{const h=c(B);return g(h,_(W,{get children(){return[_(m,{get when(){return!r()?.get("applicationName")||!r()?.get("userApiUrl")},get children(){const e=c(T);return s(()=>i(e,n.smallShadowText)),e}}),_(m,{get when(){return window.wsState()===$.Waiting},get children(){return[(()=>{const e=c(N),a=e.firstChild,[o,t]=S(a.nextSibling),l=o.nextSibling,u=l.nextSibling,[w,b]=S(u.nextSibling);return w.nextSibling,g(e,()=>r()?.get("applicationName"),o,t),g(e,()=>r()?.get("userApiUrl"),w,b),s(()=>i(e,n.smallShadowText)),e})(),(()=>{const e=c(k),a=e.firstChild,o=a.nextSibling;return a.$$click=()=>window.setWSState($.Accepted),o.$$click=()=>window.setWSState($.Rejected),s(t=>{const l=n.buttonWrapper,u=`${n.actionButton} ${n.acceptButton}`,w=`${n.actionButton} ${n.rejectButton}`;return l!==t._v$&&i(e,t._v$=l),u!==t._v$2&&i(a,t._v$2=u),w!==t._v$3&&i(o,t._v$3=w),t},{_v$:void 0,_v$2:void 0,_v$3:void 0}),x(),e})(),(()=>{const e=c(E);return s(()=>i(e,n.tinyShadowText)),e})()]}}),_(m,{get when(){return window.wsState()===$.Accepted},get children(){return[(()=>{const e=c(R);return s(()=>i(e,n.smallShadowText)),e})(),(()=>{const e=c(y),a=e.firstChild,o=a.nextSibling;return s(t=>{const l=n.tinyShadowText,u=n.whiteLink;return l!==t._v$4&&i(e,t._v$4=l),u!==t._v$5&&i(o,t._v$5=u),t},{_v$4:void 0,_v$5:void 0}),e})()]}}),_(m,{get when(){return window.wsState()===$.Rejected},get children(){const e=c(A),a=e.firstChild,o=a.nextSibling,[t,l]=S(o.nextSibling);return g(e,()=>r()?.get("applicationName"),t,l),s(()=>i(e,n.smallShadowText)),e}}),_(m,{get when(){return window.wsState()===$.Confirmed},get children(){return[(()=>{const e=c(j),a=e.firstChild,o=a.nextSibling,[t,l]=S(o.nextSibling);return t.nextSibling,g(e,()=>r()?.get("applicationName"),t,l),s(()=>i(e,n.smallShadowText)),e})(),(()=>{const e=c(M);return s(()=>i(e,n.tinyShadowText)),e})()]}})]}})),s(()=>i(h,n.header)),h})()}C(["click"]);export{I as default};
